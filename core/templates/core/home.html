{% extends "core/base.html" %}

{% load static %}

{% block scripts %}
  <script src="{% static "core/home.js" %}" defer></script>
{% endblock %}

{% block content %}
  <form id="outfits-form" method="post">
    {% csrf_token %}
    <input id="winner-input" name="winner" hidden>

    <div id="outfits-container">
      {% for outfit in outfits %}
        <input id="outfit{{ forloop.counter }}-input" name="outfit{{ forloop.counter }}" value="{{ outfit.pk }}" hidden>
        <div class="outfit">
          <input id="outfit{{ forloop.counter }}-image" type="image" class="outfit-image" src="{{ outfit.image.url }}">
          <br>
        </div>
        {% if forloop.first %}
          <div id="outfit-separator">
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </form>

<script>
  function isMobile() {
    return /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  }

  function isInStandaloneMode() {
    return (window.matchMedia('(display-mode: standalone)').matches) || (window.navigator.standalone);
  }

  window.addEventListener('load', () => {
    if (isMobile() && !isInStandaloneMode()) {
      document.getElementById('mobileMessage').style.display = 'block';
    }
  });
</script>

{% endblock %}
