{% extends "core/base.html" %}

{% block page-header %}
    Outfit Details
{% endblock %}

{% block content %}
<div class="outfit-details-container">
    {% for item in items %}
        <div class="item-container contAAAAA">
            <div class="item-image-container" onclick="toggleItemDetails(this)">
                <img src="{{ item.image.url }}" alt="{{ item.name }}" class="item-image active">
                <!-- Placeholder for future additional images -->
                <!-- <img src="{{ item.additional_image1.url }}" alt="{{ item.name }}" class="item-image"> -->
                <!-- <img src="{{ item.additional_image2.url }}" alt="{{ item.name }}" class="item-image"> -->
            </div>
            <div class="item-details" style="display: none;">
                <p>Name: {{ item.name }}</p>
                <p>Price: ${{ item.price }}</p>
                <p>Condition: {{ item.condition }}</p>
                <p>ID: {{ item.itemid }}</p>
            </div>
            <div class="item-size-selection">
                <label for="size-select-{{ item.id }}">Select:</label>
                <select id="size-select-{{ item.id }}" name="size-{{ item.id }}">
                    <option value="exclude">Exclude</option>
                    {% for size in item.sizes_xyz.all %}
                        <option value="{{ size.name }}">{{ size.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    {% endfor %}
    <button id="place-order-btn" class="btn btn-primary">Place Order</button>
</div>









<script>

function toggleItemImage(container) {
    var images = container.getElementsByClassName('item-image');
    var activeImage = container.querySelector('.item-image.active');
    var nextImage = activeImage.nextElementSibling || images[0];

    activeImage.classList.remove('active');
    activeImage.style.display = 'none';
    nextImage.classList.add('active');
    nextImage.style.display = 'block';
}

function toggleItemDetails(element) {
    var detailsElement = element.nextElementSibling;
    if (detailsElement.style.display === "none") {
        detailsElement.style.display = "block";
    } else {
        detailsElement.style.display = "none";
    }
}

function prepareOrder() {
    var selectedItems = [];
    var selects = document.querySelectorAll('select[name^="size-"]');

    selects.forEach(function(select) {
        var itemId = select.name.split('-')[1];
        var selectedSize = select.value;

        if (selectedSize !== 'exclude') {
            selectedItems.push({
                itemId: itemId,
                size: selectedSize
            });
        }
    });

    if (selectedItems.length === 0) {
        alert('Please select at least one item to order.');
        return;
    }

    console.log('Selected items:', selectedItems);
    // Here you would typically send this data to the server or integrate with Stripe
    alert('Order prepared! In the future, this will proceed to payment.');
}

</script>









<style>
<style>
    .outfit-details-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .item-container {
        width: 48%; /* For desktop: two columns */
        margin-bottom: 20px;
        padding: 10px;
        box-sizing: border-box;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .item-image-container {
        width: 100%;
        padding-top: 100%; /* 1:1 Aspect Ratio */
        position: relative;
        overflow: hidden;
        cursor: pointer;
    }

    .item-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .item-details {
        margin-top: 10px;
        padding: 15px;
        background-color: #f8f8f8;
        border-radius: 4px;
    }

    .item-size-selection {
        margin-top: 10px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .item-size-selection label {
        margin-bottom: 5px;
    }

    .item-size-selection select {
        width: 80%;
        max-width: 200px;
        padding: 5px;
        border-radius: 4px;
        border: 1px solid #ddd;
    }

    #place-order-btn {
        display: block;
        width: 200px;
        margin: 30px auto;
        padding: 10px 20px;
        font-size: 18px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    #place-order-btn:hover {
        background-color: #45a049;
    }

    @media (max-width: 768px) {
        .item-container {
            width: 100%; /* For mobile: one column */
        }
    }


</style>


</style>




{% endblock %}