{% extends "core/base.html" %}

{% block page-header %}
    Outfit Details
{% endblock %}

{% block content %}
<div class="outfit-details-container">
    {% for item in items %}
        <div class="item-container contAAAAA">
            <div class="item-image-container" onclick="toggleItemImage(this)">
                <img src="{{ item.image.url }}" alt="{{ item.name }}" class="item-image active">
                <!-- Placeholder for future additional images -->
                <!-- <img src="{{ item.additional_image1.url }}" alt="{{ item.name }}" class="item-image"> -->
                <!-- <img src="{{ item.additional_image2.url }}" alt="{{ item.name }}" class="item-image"> -->
            </div>
            <div class="item-details" style="display: none;">
                <p>Name: {{ item.name }}</p>
                <p>Price: ${{ item.price }}</p>
                <p>Condition: {{ item.condition }}</p>
                <p>ID: {{ item.itemid }}</p>
            </div>
            <div class="item-size-selection">
                <label for="size-select-{{ item.id }}">Select:</label>
                <select id="size-select-{{ item.id }}" name="size-{{ item.id }}">
                    <option value="exclude">Exclude</option>
                    {% for size in item.sizes_xyz.all %}
                        <option value="{{ size.name }}">{{ size.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    {% endfor %}
    <button id="place-order-btn" class="btn btn-primary">Place Order</button>
</div>

<script>

function toggleItemImage(container) {
    var images = container.getElementsByClassName('item-image');
    var activeImage = container.querySelector('.item-image.active');
    var nextImage = activeImage.nextElementSibling || images[0];

    activeImage.classList.remove('active');
    activeImage.style.display = 'none';
    nextImage.classList.add('active');
    nextImage.style.display = 'block';
}

function prepareOrder() {
    var selectedItems = [];
    var selects = document.querySelectorAll('select[name^="size-"]');

    selects.forEach(function(select) {
        var itemId = select.name.split('-')[1];
        var selectedSize = select.value;

        if (selectedSize !== 'exclude') {
            selectedItems.push({
                itemId: itemId,
                size: selectedSize
            });
        }
    });

    if (selectedItems.length === 0) {
        alert('Please select at least one item to order.');
        return;
    }

    console.log('Selected items:', selectedItems);
    // Here you would typically send this data to the server or integrate with Stripe
    alert('Order prepared! In the future, this will proceed to payment.');
}

</script>









<style>
    .outfit-details-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .item-container {
        width: 48%; /* For desktop: two columns */
        margin-bottom: 20px;
    }

    .item-image-container {
        width: 100%;
        padding-top: 100%; /* 1:1 Aspect Ratio */
        position: relative;
        overflow: hidden;
    }

    .item-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .item-details, .item-size-selection {
        margin-top: 10px;
    }

    #place-order-btn {
        width: 100%;
        margin-top: 20px;
    }

    @media (max-width: 768px) {
        .item-container {
            width: 100%; /* For mobile: one column */
        }
    }
</style>


    

{% endblock %}